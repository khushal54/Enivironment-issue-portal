<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Green Earth Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI", sans-serif;}

body{
height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:radial-gradient(circle at center, #0a3d2e, #020b08);
overflow:hidden;
position:relative;
}

/* BACKGROUND */
.bg-layer{position:absolute;inset:-50%;background:radial-gradient(circle, rgba(0,255,150,0.15), transparent 60%);animation:floatBg 20s linear infinite;}
.bg-layer:nth-child(2){animation-duration:30s;opacity:0.6;}
.bg-layer:nth-child(3){animation-duration:45s;opacity:0.4;}

@keyframes floatBg{
from{transform:translate(-10%, -10%) rotate(0deg);}
to{transform:translate(10%, 10%) rotate(360deg);}
}

/* PARTICLES */
.particles span{position:absolute;width:6px;height:6px;background:rgba(150,255,200,0.6);border-radius:50%;animation:floatParticles linear infinite;}
@keyframes floatParticles{
from{transform:translateY(100vh) scale(0.5);opacity:0;}
to{transform:translateY(-10vh) scale(1);opacity:1;}
}

/* LOGIN CARD */
.login-box{
position:relative;
z-index:2;
width:360px;
padding:40px;
background:rgba(255,255,255,0.15);
backdrop-filter:blur(14px);
border-radius:16px;
box-shadow:0 15px 50px rgba(0,0,0,0.5);
color:#fff;
text-align:center;
animation:slideUp 1s ease;
}

@keyframes slideUp{
from{transform:translateY(50px);opacity:0;}
to{transform:translateY(0);opacity:1;}
}

.login-box h2{font-size:30px;margin-bottom:5px;}
.login-box p{font-size:14px;color:#d6ffd6;margin-bottom:30px;}

/* INPUTS */
.input-group{position:relative;margin-bottom:25px;}
.input-group input{
width:100%;
padding:10px 35px 10px 0;
background:transparent;
border:none;
border-bottom:2px solid #baffba;
outline:none;
color:white;
font-size:16px;
}

.input-group label{
position:absolute;
left:0;
top:50%;
transform:translateY(-50%);
color:#d9ffd9;
pointer-events:none;
transition:0.3s;
}

.input-group input:focus ~ label,
.input-group input:valid ~ label{
top:-8px;
font-size:12px;
color:#9aff9a;
}

.eye{position:absolute;right:0;top:50%;transform:translateY(-50%);cursor:pointer;}

/* BUTTON */
button{
width:100%;
padding:12px;
border:none;
border-radius:30px;
background:#00c853;
color:white;
font-size:16px;
cursor:pointer;
transition:0.3s;
}

button:hover{background:#00e676;transform:scale(1.03);}

/* LINKS */
.links{display:flex;justify-content:space-between;margin-top:15px;}
.links a{color:#e1ffe1;font-size:13px;text-decoration:none;}
.links a:hover{text-decoration:underline;}

@media(max-width:400px){.login-box{width:90%;}}
</style>
</head>

<body>

<div class="bg-layer"></div>
<div class="bg-layer"></div>
<div class="bg-layer"></div>

<div class="particles">
<span style="left:10%; animation-duration:12s;"></span>
<span style="left:30%; animation-duration:16s;"></span>
<span style="left:50%; animation-duration:14s;"></span>
<span style="left:70%; animation-duration:18s;"></span>
<span style="left:90%; animation-duration:20s;"></span>
</div>

<div class="login-box">
<h2>üåç Green Earth</h2>
<p>Protect Nature ¬∑ Report Issues</p>

<form id="loginForm">

  <div class="input-group">
    <input type="text" id="username" required>
    <label>Username</label>
  </div>

  <div class="input-group">
    <input type="password" id="password" required>
    <label>Password</label>
    <span class="eye" onclick="togglePassword()">üëÅ</span>
  </div>

  <div class="input-group">
    <input type="email" id="email" required>
    <label>Email</label>
  </div>

  <div class="input-group">
    <input type="text" id="otp" placeholder="Enter OTP">
  </div>

  <!-- SEND OTP -->
  <button type="button" onclick="sendOTP()">Send OTP</button>

  <!-- VERIFY OTP -->
  <button type="button" onclick="verifyOTP()">Verify OTP</button>

  <!-- LOGIN -->
  <button type="submit">Login</button>

</form>



</div>

<script>
let emailVerified = false;

function togglePassword(){
const pwd=document.getElementById("password");
pwd.type=pwd.type==="password"?"text":"password";
}

async function sendOTP(){
const email=document.getElementById("email").value;

await fetch("/send-email",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({email})
});

alert("OTP Sent!");
}

async function verifyOTP(){
const email=document.getElementById("email").value;
const otp=document.getElementById("otp").value;

const res=await fetch("/verify-otp",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({email,otp})
});

const data=await res.json();

if(data.status==="verified"){
emailVerified=true;
alert("Email Verified!");
}else{
alert("Invalid OTP");
}
}

document.getElementById("loginForm").addEventListener("submit",function(e){
e.preventDefault();

if(!emailVerified){
alert("Please verify email first");
return;
}

const user=username.value;
const pass=password.value;

if(user==="khushal54" && pass==="Khushal@143"){
window.location="/admin";
}else{
window.location="/report";
}
});
</script>




</body>
</html>
